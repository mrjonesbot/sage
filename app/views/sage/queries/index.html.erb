<div id="">
<div class="padding left-align <%= "#{current_page?(root_path) ? 'active' : ''}" %>">
  <h5>Queries</h5>
</div>

  <%# SUB NAVIGATION %>
  <div class="right-align" style="">
    <% if blazer_user %>
      <%= link_to "All", root_path, class: !params[:filter] ? "active" : nil, style: "margin-right: 40px;" %>
      <% if Blazer.audit %>
        <%= link_to "Viewed", root_path(filter: "viewed"), class: params[:filter] == "viewed" ? "active" : nil, style: "margin-right: 40px;" %>
      <% end %>

      <%= link_to "Mine", root_path(filter: "mine"), class: params[:filter] == "mine" ? "active" : nil, style: "margin-right: 40px;" %>
    <% end %>
    <%= link_to new_query_path do %>
      <button>
        New Query
      </button>
    <% end %>
  </div>
</div>

<%= render partial: 'search' %>

<%= turbo_frame_tag "queries" do %>
  <% if @queries.any? %>
    <table class="border">
      <thead>
        <tr>
          <th>Name</th>
          <% if Blazer.user_class %>
            <th style="width: 20%;">Mastermind</th>
          <% end%>
        </tr>
      </thead>
      <tbody>
        <% @queries.each do |query| %>
          <tr> 
            <td>
              <%= link_to query.name, query_path(query), class: "text-decoration-none", data: { turbo_frame: '_top' } %>
            </td>
            <% if Blazer.user_class %>
              <td><%= query.creator&.name %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <div style="display: flex; justify-content: center; padding: 1rem;">
      <%== pagy_navigation(@pagy) if @pagy.pages > 1 %>
    </div>
  <% else %>
    <div class="mt-3">
      <p>No queries found.</p>
    </div>
  <% end %>
<% end %>
