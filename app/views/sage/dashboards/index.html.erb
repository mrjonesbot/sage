<%# re-structure header, so that navigation and actions are inline %>
<div id="dashboards">
  <div class="padding left-align <%= "#{current_page?(dashboards_path) ? 'active' : ''}" %>">
    <h5>Dashboards</h5>
  </div>

  <div class="right-align" style="">
    <% if blazer_user %>
      <%= link_to "All", root_path, class: !params[:filter] ? "active" : nil, style: "margin-right: 40px;" %>

      <% if Blazer.audit %>
        <%= link_to "Viewed", root_path(filter: "viewed"), class: params[:filter] == "viewed" ? "active" : nil, style: "margin-right: 40px;" %>
      <% end %>

      <%= link_to "Mine", root_path(filter: "mine"), class: params[:filter] == "mine" ? "active" : nil, style: "margin-right: 40px;" %>
    <% end %>
    <%= link_to new_dashboard_path do %>
      <button>
        New Dashboard
      </button>
    <% end %>
  </div>

  <%= render partial: 'search' %>

  <% if @dashboards.any? %>
    <table class="border">
      <thead>
        <tr>
          <th>Name</th>
          <% if Blazer.user_class %>
            <th style="width: 20%;">Mastermind</th>
          <% end%>
        </tr>
      </thead>
      <tbody>
        <% @dashboards.each do |dashboard| %>
          <tr>
            <td>
              <%= link_to dashboard.name, dashboard_path(dashboard), class: "text-decoration-none" %>
            </td>
            <% if Blazer.user_class %>
              <td><%= dashboard.creator.name %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <div style="display: flex; justify-content: center; padding: 1rem;">
      <%== pagy_nav(@pagy) if @pagy.pages > 1 %>
    </div>
  <% else %>
    <div class="mt-3">
      <p>No dashboards found.</p>
    </div>
  <% end %>
</div>
